{% extends 'students/base.html' %}
{% load staticfiles %}
{% block title %}
    <title>{{ article.title|truncatewords:10 }}</title>
{% endblock %}
{% block description %}
    <meta name="description" content="{{ article.preview|striptags|safe|truncatewords:18 }}"/>
{% endblock %}
{% block head %}
    <link rel="stylesheet" href="{% static 'ckeditor/ckeditor/plugins/codesnippet/lib/highlight/styles/monokai.css' %}"/>
    <script src="{% static 'ckeditor/ckeditor/plugins/codesnippet/lib/highlight/highlight.pack.js' %}"></script>
    <style>
        code {
            overflow: scroll;
            white-space: inherit !important;
            word-wrap: normal !important;
        }

        pre {
            padding: 0px !important;
            background-color: transparent !important;
        }
    </style>
{% endblock %}

{% block content %}
    <div class="article">
        <div class="article-date">{{ article.datetime|timesince }} назад</div>
        <h1 class="article-title">
            {% if article.course.subject.slug %}
                <a href="{% url 'subject' article.course.subject.slug %}">{{ article.course.subject.name }}</a> →
            {% endif %}
            {{ article.title }}
        </h1>
        {{ article.preview|safe }}
        {% if app_ad %}
            <a class="app_ad hidden-lg hidden-md" href="{{ app_ad.url }}" target="_blank">
                <img class="app_ad_img" src="{{ app_ad.icon.url }}" alt="{{ app_id.title }}">
                <img class="app_ad_arrow" src="{% static 'img/arrow_forward.svg' %}" alt="Arrow forward">
                <div class="app_ad_info">
                    <div class="app_ad_title">{{ app_ad.title }}</div>
                    <div class="app_ad_subtitle">{{ app_ad.subtitle }}</div>
                </div>
                <div class="clearfix"></div>
            </a>
        {% endif %}
        {{ article.body|safe }}
        <div class="clearfix"></div>
        {% include 'blocks/share_buttons.html' %}
        <div class="clearfix"></div>
        <div class="article-data">
            <span class="fa fa-eye"></span> {{ article.viewed }} <span class="tab"></span>
            <span class="fa fa-mobile"></span> {{ article.viewed_mobile }} <span class="tab"></span>
            <span class="fa fa-user"></span> {{ article.author.get_full_name }}
        </div>
        <script>hljs.initHighlightingOnLoad();</script>
    </div>
{% endblock %}

